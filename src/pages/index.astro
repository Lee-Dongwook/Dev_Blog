---
import BaseLayout from "src/layouts/BaseLayout.astro"
import { getCollection } from "astro:content";
import SharedComponentsDemo from "src/components/SharedComponentsDemo.astro";

const posts = (await getCollection('blog',({ data }) => !data.draft)).sort((a,b) => b.data.date.getTime() - a.data.date.getTime()).slice(0, 3)

const projects = [
	{
	   title: 'LinkBrain Chrome Extension',
       description:
        '웹 페이지 캡처 → AI 요약/지식그래프 저장. content script/백그라운드 스트리밍, i18n 하이브리드.',
       stack: ['React', 'Zustand', 'React Query', 'i18n'],
       href: '/projects/linkbrain',
       repo: 'https://github.com/your/repo'
	}
]

const experience = [
  {
    company: 'Acme Corp',
    role: 'Frontend Engineer',
    period: '2024 — Present',
    bullets: [
      '크롬 익스텐션 신규 개발(스트리밍 기반 채팅/페이지 인덱싱)',
      'MDX/Content Collections로 기술 블로그 플랫폼 구축',
      '성능 최적화: LCP 38% 개선, 번들 -27%'
    ]
  },
  {
    company: 'Side Projects',
    role: 'Open Source',
    period: '2023 — 2024',
    bullets: [
      'React 클론(Fiber/Scheduler/Hooks) 연구/구현',
      'PWA + AWS EC2 배포 파이프라인 셋업'
    ]
  }
]

const skills = [
  'TypeScript', 'React/Next.js', 'Astro', 'Tailwind v4',
  'Zustand', 'React Query', 'MDX', 'i18n',
  'FastAPI', 'Supabase', 'Postgres',
  'AWS EC2', 'Vercel', 'Playwright'
]

const person = {
  '@context': 'https://schema.org',
  '@type': 'Person',
  name: 'Lee Dongwook',
  jobTitle: 'Frontend Engineer',
  url: 'https://your-domain.com',
  sameAs: [
    'https://github.com/your',
    'https://www.linkedin.com/in/your'
  ]
}
---
<BaseLayout title="Lee Dongwook • Frontend based FullStack Engineer" description="Frontend Engineer — React/Next.js, Astro, TypeScript. 실무/사이드에서 만든 것들을 기록합니다.">
  <!-- Hero -->
   <section class="container mx-auto py-14 sm:py-20">
	 <div class="flex flex-col items-start gap-6 sm:flex-row sm:items-center sm:justify-between">
      <div>
        <h1 class="text-3xl sm:text-4xl font-bold tracking-tight">
          안녕하세요, <span class="bg-gradient-to-r from-brand-600 to-indigo-500 bg-clip-text text-transparent">이동욱</span>입니다.
        </h1>
        <p class="mt-3 text-base text-gray-600 dark:text-gray-400 max-w-prose">
          React/Next.js, Astro, TypeScript를 주력으로 씁니다.
          데이터 흐름/성능/툴링에 진심이고, 만들어 공개하는 걸 좋아합니다.
        </p>
        <div class="mt-5 flex flex-wrap gap-3">
          <a href="/resume.pdf" class="rounded-md border px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10">이력서 다운로드</a>
          <a href="#projects" class="rounded-md bg-brand-600 text-white px-4 py-2 text-sm hover:opacity-90">프로젝트 보기</a>
          <a href="mailto:you@email.com" class="rounded-md border px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10">메일 보내기</a>
        </div>
      </div>
      <img src="/avatar.jpg" alt="Lee Dongwook" width="120" height="120"
           class="rounded-full border object-cover shadow-sm self-start sm:self-auto" />
    </div>
   </section>

  <!-- Experience -->
  <section id="experience" class="container mx-auto py-10 sm:py-14 scroll-mt-20">
    <h2 class="text-xl font-semibold">경력</h2>
    <ol class="mt-6 space-y-6">
      {experience.map((exp) => (
        <li class="rounded-lg border p-5">
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1">
            <div class="font-medium">{exp.role} • {exp.company}</div>
            <div class="text-sm text-gray-500">{exp.period}</div>
          </div>
          <ul class="mt-3 list-disc pl-5 text-sm text-gray-700 dark:text-gray-300 space-y-1.5">
            {exp.bullets.map(b => <li>{b}</li>)}
          </ul>
        </li>
      ))}
    </ol>
  </section>

    <!-- Projects -->
  <section id="projects" class="container mx-auto py-10 sm:py-14 scroll-mt-20">
    <h2 class="text-xl font-semibold">프로젝트</h2>
    <div class="mt-6 grid gap-6 sm:grid-cols-2">
      {projects.map((p) => (
        <article class="group rounded-lg border p-5 hover:shadow-sm transition">
          <div class="flex items-start justify-between gap-3">
            <h3 class="text-lg font-medium group-hover:underline">
              <a href={p.href}>{p.title}</a>
            </h3>
            {p.repo && <a class="text-sm text-gray-500 hover:underline" href={p.repo} rel="noopener noreferrer" target="_blank">Repo</a>}
          </div>
          <p class="mt-2 text-sm text-gray-700 dark:text-gray-300">{p.description}</p>
          <ul class="mt-3 flex flex-wrap gap-2">
            {p.stack.map(s => <li class="rounded-md border px-2 py-1 text-xs text-gray-600 dark:text-gray-300">{s}</li>)}
          </ul>
        </article>
      ))}
    </div>
  </section>

  <!-- Skills -->
  <section id="skills" class="container mx-auto py-10 sm:py-14 scroll-mt-20">
    <h2 class="text-xl font-semibold">스킬</h2>
    <ul class="mt-4 flex flex-wrap gap-2">
      {skills.map((s) => (
        <li class="rounded-md border px-3 py-1.5 text-sm text-gray-700 dark:text-gray-200">{s}</li>
      ))}
    </ul>
  </section>

  <!-- Latest Posts -->
  <section id="posts" class="container mx-auto py-10 sm:py-14 scroll-mt-20">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">최근 글</h2>
      <a href="/blog" class="text-sm text-gray-500 hover:underline">모두 보기</a>
    </div>
    <ul class="mt-6 space-y-5">
      {posts.map((p) => (
        <li class="rounded-lg border p-5 hover:shadow-sm transition">
          <a class="block" href={`/blog/${p.slug}/`}>
            <div class="text-lg font-medium">{p.data.title}</div>
            {p.data.description && <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">{p.data.description}</p>}
            <time class="mt-1 block text-xs text-gray-500">{p.data.date.toISOString().slice(0,10)}</time>
          </a>
        </li>
      ))}
    </ul>
  </section>
  <!-- Shared Components Demo -->
  <section id="shared-demo" class="container mx-auto py-10 sm:py-14 scroll-mt-20">
    <h2 class="text-xl font-semibold mb-6">Shared UI Components Demo</h2>
    <SharedComponentsDemo />
  </section>

  <!-- Contact -->
  <section id="contact" class="container mx-auto py-12 sm:py-16">
    <div class="rounded-lg border p-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <div>
        <h3 class="text-lg font-semibold">같이 만들 사람/회사 찾습니다</h3>
        <p class="text-sm text-gray-600 dark:text-gray-400">프론트엔드·확장프로그램·AI 인터랙션 관심 있어요.</p>
      </div>
      <div class="flex gap-3">
        <a href="mailto:you@email.com" class="rounded-md bg-brand-600 text-white px-4 py-2 text-sm hover:opacity-90">메일</a>
        <a href="https://github.com/your" target="_blank" rel="noopener noreferrer"
           class="rounded-md border px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10">GitHub</a>
        <a href="https://www.linkedin.com/in/your" target="_blank" rel="noopener noreferrer"
           class="rounded-md border px-4 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10">LinkedIn</a>
      </div>
    </div>
  </section>
   <!-- JSON-LD -->
  <script type="application/ld+json">{JSON.stringify(person)}</script>
</BaseLayout>
